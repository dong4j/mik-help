# MIK Upload API

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

å¤šè¯­è¨€å®ç°çš„è‡ªå®šä¹‰å›¾åºŠä¸Šä¼ æ¥å£ç¤ºä¾‹ï¼Œä¸º [Markdown Image Kit](https://github.com/dong4j/markdown-image-kit) æ’ä»¶æä¾›è‡ªå®šä¹‰å›¾åºŠåŠŸèƒ½å‚è€ƒå®ç°ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [è®¾è®¡ç†å¿µ](#è®¾è®¡ç†å¿µ)
- [å®ç°åˆ—è¡¨](#å®ç°åˆ—è¡¨)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [API è§„èŒƒ](#api-è§„èŒƒ)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [æ‰©å±•å¼€å‘](#æ‰©å±•å¼€å‘)

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æä¾›äº†å¤šç§ç¼–ç¨‹è¯­è¨€å®ç°çš„å›¾ç‰‡ä¸Šä¼  API ç¤ºä¾‹ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»ºè‡ªå·±çš„å›¾åºŠæœåŠ¡ã€‚æ¯ä¸ªå®ç°éƒ½éµå¾ªç›¸åŒçš„ API è§„èŒƒï¼Œä½†é‡‡ç”¨å„è‡ªè¯­è¨€çš„æœ€ä½³å®è·µå’Œæœ€ç®€å®ç°æ–¹å¼ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… å¤šè¯­è¨€å®ç°ç¤ºä¾‹ï¼ˆJavaã€Node.jsã€Pythonã€Go ç­‰ï¼‰
- âœ… ç»Ÿä¸€çš„ RESTful API æ¥å£
- âœ… æ–‡ä»¶æŒ‰ç±»å‹è‡ªåŠ¨åˆ†ç±»å­˜å‚¨
- âœ… ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åé¿å…å†²çª
- âœ… æ”¯æŒé™æ€èµ„æºé¢„è§ˆ
- âœ… ç®€æ´çš„ä»£ç å®ç°ï¼Œæ˜“äºç†è§£å’Œæ‰©å±•

## ğŸ’¡ è®¾è®¡ç†å¿µ

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªé¡¹ç›®ï¼Ÿ

Markdown Image Kit æ’ä»¶å†…ç½®äº†å¤šç§ä¸»æµå›¾åºŠçš„æ”¯æŒï¼ˆé˜¿é‡Œäº‘ OSSã€ä¸ƒç‰›äº‘ã€è…¾è®¯äº‘ COS ç­‰ï¼‰ï¼Œä½†æ¯ä¸ªç”¨æˆ·çš„éœ€æ±‚ä¸åŒï¼š

1. **éšç§ä¿æŠ¤**ï¼šä¸æƒ³å°†å›¾ç‰‡ä¸Šä¼ åˆ°å…¬æœ‰äº‘
2. **æˆæœ¬æ§åˆ¶**ï¼šé¿å…äº‘æœåŠ¡å•†çš„è´¹ç”¨
3. **å†…ç½‘éƒ¨ç½²**ï¼šä¼ä¸šå†…éƒ¨æ–‡æ¡£ç³»ç»Ÿéœ€è¦å†…ç½‘å›¾åºŠ
4. **ç‰¹æ®Šéœ€æ±‚**ï¼šéœ€è¦è‡ªå®šä¹‰å›¾ç‰‡å¤„ç†é€»è¾‘ï¼ˆæ°´å°ã€å‹ç¼©ç­‰ï¼‰

### ä¸¤ç§ä½¿ç”¨æ–¹å¼

#### æ–¹å¼ä¸€ï¼šæœ¬åœ°å›¾åºŠï¼ˆæ¨èå…¥é—¨ï¼‰

ç›´æ¥è¿è¡Œç¤ºä¾‹ä»£ç ï¼Œæ­å»ºä¸€ä¸ªç®€å•çš„æœ¬åœ°å›¾åºŠæœåŠ¡ï¼š

```
[MIK æ’ä»¶] â†’ [æœ¬åœ° Upload API] â†’ [æœ¬åœ°å­˜å‚¨]
                                    â†“
                              [é¢„è§ˆè®¿é—®]
```

**é€‚ç”¨åœºæ™¯**ï¼š

- ä¸ªäººç¬”è®°ã€åšå®¢å†™ä½œ
- å†…ç½‘æ–‡æ¡£ç³»ç»Ÿ
- å¿«é€ŸåŸå‹å¼€å‘

#### æ–¹å¼äºŒï¼šä¸­è½¬æœåŠ¡ï¼ˆæ¨èè¿›é˜¶ï¼‰

å°† Upload API ä½œä¸ºä¸­è½¬å±‚ï¼Œåœ¨æ¥æ”¶åˆ°æ–‡ä»¶åï¼Œå†ä¸Šä¼ åˆ°å…¶ä»–å›¾åºŠï¼š

```
[MIK æ’ä»¶] â†’ [Upload API ä¸­è½¬] â†’ [è‡ªå®šä¹‰é€»è¾‘] â†’ [ç›®æ ‡å›¾åºŠ]
                                   â†“
                           â€¢ å›¾ç‰‡å‹ç¼©
                           â€¢ æ·»åŠ æ°´å°
                           â€¢ æ ¼å¼è½¬æ¢
                           â€¢ æƒé™æ§åˆ¶
                           â€¢ æ—¥å¿—è®°å½•
```

**é€‚ç”¨åœºæ™¯**ï¼š

- éœ€è¦å›¾ç‰‡é¢„å¤„ç†
- ç»Ÿä¸€å¤šä¸ªå›¾åºŠçš„ä¸Šä¼ æ¥å£
- éœ€è¦è®¿é—®æ§åˆ¶å’Œå®¡è®¡
- ä¼ä¸šçº§åº”ç”¨

### è®¾è®¡ä¼˜åŠ¿

**å‡è½» MIK æ’ä»¶çš„å¤æ‚åº¦**ï¼šæ’ä»¶ä¸éœ€è¦é›†æˆæ‰€æœ‰å›¾åºŠçš„ SDK å’Œé€»è¾‘ï¼Œåªéœ€è¦è°ƒç”¨ç»Ÿä¸€çš„ä¸Šä¼ æ¥å£ã€‚ç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©åç«¯å®ç°ï¼Œæ’ä»¶ä¿æŒç®€æ´å’Œç¨³å®šã€‚

## ğŸ—‚ å®ç°åˆ—è¡¨

### Java å®ç°

**ç›®å½•**: `java/`

**æŠ€æœ¯æ ˆ**: Spring Boot 3.5.4 + Maven + JDK 17

**ç‰¹ç‚¹**:

- ä¼ä¸šçº§ Java åº”ç”¨æ¶æ„
- å®Œå–„çš„å¼‚å¸¸å¤„ç†
- æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ 
- æ˜“äºé›†æˆåˆ°ç°æœ‰ Spring é¡¹ç›®
- ä½¿ç”¨æœ€æ–°çš„ Spring Boot 3.x

**å¯åŠ¨æ–¹å¼**:

```bash
cd java
mvn clean package
java -jar target/mik-upload-api-1.0.0.jar
```

**è¯¦ç»†æ–‡æ¡£**: [Java å®ç°æ–‡æ¡£](java/README.md)

---

### Golang å®ç°

**ç›®å½•**: `golang/`

**æŠ€æœ¯æ ˆ**: Go 1.21 + æ ‡å‡†åº“

**ç‰¹ç‚¹**:

- é›¶ä¾èµ–ï¼Œä»…ä½¿ç”¨æ ‡å‡†åº“
- é«˜æ€§èƒ½å¹¶å‘å¤„ç†
- ç¼–è¯‘æˆå•ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶
- éƒ¨ç½²ç®€å•ï¼Œèµ„æºå ç”¨ä½

**å¯åŠ¨æ–¹å¼**:

```bash
cd golang
go run main.go
```

**è¯¦ç»†æ–‡æ¡£**: [Golang å®ç°æ–‡æ¡£](golang/README.md)

---

### Python å®ç°

**ç›®å½•**: `python/`

**æŠ€æœ¯æ ˆ**: Python 3.8+ + Flask

**ç‰¹ç‚¹**:

- ç®€æ´æ˜“æ‡‚çš„ä»£ç 
- Flask è½»é‡çº§æ¡†æ¶
- æ”¯æŒ Gunicorn/uWSGI éƒ¨ç½²
- é€‚åˆå¿«é€ŸåŸå‹å¼€å‘

**å¯åŠ¨æ–¹å¼**:

```bash
cd python
pip install -r requirements.txt
python app.py
```

**è¯¦ç»†æ–‡æ¡£**: [Python å®ç°æ–‡æ¡£](python/README.md)

---

### Node.js å®ç°

**ç›®å½•**: `nodejs/`

**æŠ€æœ¯æ ˆ**: Node.js 14+ + Express + Multer

**ç‰¹ç‚¹**:

- åŸºäº Express æ¡†æ¶
- å¼‚æ­¥éé˜»å¡ I/O
- å®Œå–„çš„é”™è¯¯å¤„ç†
- æ”¯æŒ PM2 è¿›ç¨‹ç®¡ç†

**å¯åŠ¨æ–¹å¼**:

```bash
cd nodejs
npm install
npm start
```

**è¯¦ç»†æ–‡æ¡£**: [Node.js å®ç°æ–‡æ¡£](nodejs/README.md)

---

### Kotlin å®ç°

**ç›®å½•**: `kotlin/`

**æŠ€æœ¯æ ˆ**: Kotlin 1.9 + Ktor + JDK 17

**ç‰¹ç‚¹**:

- åŸºäº Ktor å¼‚æ­¥æ¡†æ¶
- åç¨‹æ”¯æŒï¼Œé«˜æ€§èƒ½
- ç±»å‹å®‰å…¨çš„ DSL
- ç®€æ´ä¼˜é›…çš„ Kotlin ä»£ç 

**å¯åŠ¨æ–¹å¼**:

```bash
cd kotlin
./gradlew run
```

**è¯¦ç»†æ–‡æ¡£**: [Kotlin å®ç°æ–‡æ¡£](kotlin/README.md)

---

### å…¶ä»–è¯­è¨€å®ç°ï¼ˆæ¬¢è¿è´¡çŒ®ï¼‰

| è¯­è¨€   | æŠ€æœ¯æ ˆ              | çŠ¶æ€      |
|------|------------------|---------|
| PHP  | Laravel/Slim     | ğŸ’¡ æ¬¢è¿è´¡çŒ® |
| Rust | Actix-web/Rocket | ğŸ’¡ æ¬¢è¿è´¡çŒ® |
| C#   | ASP.NET Core     | ğŸ’¡ æ¬¢è¿è´¡çŒ® |
| Ruby | Rails/Sinatra    | ğŸ’¡ æ¬¢è¿è´¡çŒ® |

**æ¬¢è¿è´¡çŒ®**ï¼šå¦‚æœæ‚¨æœ‰å…¶ä»–è¯­è¨€çš„å®ç°ï¼Œæ¬¢è¿æäº¤ PRï¼æŸ¥çœ‹[è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)äº†è§£è¯¦æƒ…ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é€‰æ‹©è¯­è¨€å®ç°

æ ¹æ®æ‚¨ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œé€‰æ‹©å¯¹åº”çš„å®ç°ï¼š

#### Javaï¼ˆä¼ä¸šçº§ï¼Œç¨³å®šï¼‰

```bash
cd java
mvn clean package
java -jar target/mik-upload-api-1.0.0.jar
```

#### Golangï¼ˆé«˜æ€§èƒ½ï¼Œå•æ–‡ä»¶ï¼‰

```bash
cd golang
go run main.go
```

#### Pythonï¼ˆç®€æ´ï¼Œå¿«é€Ÿå¼€å‘ï¼‰

```bash
cd python
pip install -r requirements.txt
python app.py
```

#### Node.jsï¼ˆå¼‚æ­¥ï¼Œç”Ÿæ€ä¸°å¯Œï¼‰

```bash
cd nodejs
npm install
npm start
```

#### Kotlinï¼ˆç°ä»£ï¼Œç±»å‹å®‰å…¨ï¼‰

```bash
cd kotlin
./gradlew run
```

æ‰€æœ‰å®ç°çš„æœåŠ¡éƒ½è¿è¡Œåœ¨ `http://localhost:12345`

### æµ‹è¯•ä¸Šä¼ 

```bash
curl -X POST http://localhost:12345/upload \
  -F "filename=@/path/to/image.png"
```

### é…ç½® MIK æ’ä»¶

1. æ‰“å¼€ IDEï¼š`Settings/Preferences` â†’ `Tools` â†’ `Markdown Image Kit`
2. é€‰æ‹© `è‡ªå®šä¹‰` å›¾åºŠ
3. é…ç½®ï¼š
    - URL: `http://localhost:12345/upload`
   - å‚æ•°å: `filename`
    - JSON Path: `data.url`

### è¯­è¨€é€‰æ‹©å»ºè®®

| åœºæ™¯    | æ¨èè¯­è¨€           | ç†ç”±           |
|-------|----------------|--------------|
| ä¼ä¸šçº§åº”ç”¨ | Java/Kotlin    | æˆç†Ÿç¨³å®šï¼Œç”Ÿæ€å®Œå–„    |
| é«˜æ€§èƒ½åœºæ™¯ | Golang         | å¹¶å‘æ€§èƒ½ä¼˜ç§€ï¼Œèµ„æºå ç”¨ä½ |
| å¿«é€ŸåŸå‹  | Python/Node.js | å¼€å‘æ•ˆç‡é«˜ï¼Œä»£ç ç®€æ´   |
| ç°æœ‰æŠ€æœ¯æ ˆ | ä¸å›¢é˜ŸæŠ€æœ¯æ ˆä¸€è‡´       | é™ä½å­¦ä¹ æˆæœ¬       |

## ğŸ“¡ API è§„èŒƒ

æ‰€æœ‰è¯­è¨€å®ç°éƒ½éµå¾ªä»¥ä¸‹ç»Ÿä¸€çš„ API è§„èŒƒï¼š

### ä¸Šä¼ æ¥å£

**ç«¯ç‚¹**: `POST /upload`

**è¯·æ±‚æ ¼å¼**: `multipart/form-data`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å      | ç±»å‹   | å¿…å¡« | è¯´æ˜     |
|----------|------|----|--------|
| filename | File | æ˜¯  | è¦ä¸Šä¼ çš„æ–‡ä»¶ |

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X POST http://localhost:12345/upload \
  -F "filename=@/path/to/image.png"
```

**å“åº”æ ¼å¼**: `application/json`

**æˆåŠŸå“åº”** (HTTP 200):

```json
{
  "data": {
    "url": "http://localhost:12345/archive/png/1634567890123image.png"
  }
}
```

**å¤±è´¥å“åº”** (HTTP 400/500):

```json
{
  "error": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

### é¢„è§ˆæ¥å£

**ç«¯ç‚¹**: `GET /archive/{type}/{filename}`

**è¯´æ˜**: è®¿é—®å·²ä¸Šä¼ çš„å›¾ç‰‡

**ç¤ºä¾‹**:

```
http://localhost:12345/archive/png/1634567890123image.png
```

### æ–‡ä»¶å­˜å‚¨ç»“æ„

ä¸Šä¼ çš„æ–‡ä»¶æŒ‰ç…§ä»¥ä¸‹ç»“æ„å­˜å‚¨ï¼š

```
upload-path/
â”œâ”€â”€ png/
â”‚   â”œâ”€â”€ 1634567890123image.png
â”‚   â””â”€â”€ 1634567890456photo.png
â”œâ”€â”€ jpg/
â”‚   â”œâ”€â”€ 1634567890789picture.jpg
â”‚   â””â”€â”€ 1634567890012snapshot.jpg
â”œâ”€â”€ gif/
â”‚   â””â”€â”€ 1634567890345animation.gif
â””â”€â”€ ...
```

**å‘½åè§„åˆ™**: `{timestamp}{original-filename}`

**åˆ†ç±»ä¾æ®**: æ–‡ä»¶æ‰©å±•å

## ğŸ“ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ä¸€ï¼šä¸ªäººæœ¬åœ°å›¾åºŠ

**éœ€æ±‚**: ä¸æƒ³å°†å›¾ç‰‡ä¸Šä¼ åˆ°äº‘ç«¯ï¼Œå¸Œæœ›ä¿å­˜åœ¨æœ¬åœ°ã€‚

**æ–¹æ¡ˆ**:

1. è¿è¡Œ Upload API åœ¨æœ¬æœºï¼ˆlocalhostï¼‰
2. è®¾ç½®ä¸Šä¼ è·¯å¾„åˆ°æœ¬åœ°ç£ç›˜
3. MIK æ’ä»¶é…ç½®ä¸º `http://localhost:12345/upload`
4. å›¾ç‰‡ä¿å­˜åœ¨æœ¬åœ°ï¼ŒMarkdown å¼•ç”¨æœ¬åœ°è·¯å¾„

**ä¼˜ç‚¹**:

- å®Œå…¨ç¦»çº¿å·¥ä½œ
- æ— éœ€æ‹…å¿ƒéšç§æ³„éœ²
- æ— å­˜å‚¨æˆæœ¬

**ç¼ºç‚¹**:

- å›¾ç‰‡ä»…åœ¨æœ¬æœºå¯è®¿é—®
- ä¸é€‚åˆåˆ†äº«ç»™ä»–äºº

### åœºæ™¯äºŒï¼šå†…ç½‘å›¢é˜Ÿå›¾åºŠ

**éœ€æ±‚**: å›¢é˜Ÿå†…éƒ¨æ–‡æ¡£ç³»ç»Ÿï¼Œå›¾ç‰‡å­˜å‚¨åœ¨å†…ç½‘æœåŠ¡å™¨ã€‚

**æ–¹æ¡ˆ**:

1. åœ¨å†…ç½‘æœåŠ¡å™¨éƒ¨ç½² Upload API
2. é…ç½® NAS æˆ–å…±äº«å­˜å‚¨ä½œä¸ºä¸Šä¼ è·¯å¾„
3. å›¢é˜Ÿæˆå‘˜é…ç½®å†…ç½‘åœ°å€ï¼š`http://192.168.1.100:12345/upload`
4. æ‰€æœ‰å›¾ç‰‡ç»Ÿä¸€ç®¡ç†

**ä¼˜ç‚¹**:

- å›¢é˜Ÿå…±äº«è®¿é—®
- ç»Ÿä¸€ç®¡ç†å¤‡ä»½
- å†…ç½‘å®‰å…¨å¯æ§

**ç¼ºç‚¹**:

- éœ€è¦æœåŠ¡å™¨èµ„æº
- éœ€è¦ç½‘ç»œé…ç½®

### åœºæ™¯ä¸‰ï¼šäº‘ç«¯å›¾åºŠä¸­è½¬

**éœ€æ±‚**: ä½¿ç”¨éä¸»æµå›¾åºŠï¼ˆå¦‚è‡ªå»º MinIOã€WebDAV ç­‰ï¼‰ï¼Œä½† MIK æ’ä»¶æœªå†…ç½®æ”¯æŒã€‚

**æ–¹æ¡ˆ**:

1. åŸºäºç¤ºä¾‹ä»£ç æ‰©å±• Upload API
2. åœ¨æ¥æ”¶æ–‡ä»¶åï¼Œè°ƒç”¨ç›®æ ‡å›¾åºŠçš„ SDK ä¸Šä¼ 
3. è¿”å›ç›®æ ‡å›¾åºŠçš„ URL ç»™æ’ä»¶

**ç¤ºä¾‹ä»£ç **ï¼ˆJavaï¼‰:

```java
@RequestMapping("upload")
public ResponseEntity<?> upload(@RequestParam("filename") MultipartFile file) {
    // 1. æ¥æ”¶æ–‡ä»¶
    String originalFilename = file.getOriginalFilename();
    
    // 2. ä¸Šä¼ åˆ°ç›®æ ‡å›¾åºŠï¼ˆå¦‚ MinIOï¼‰
    String minioUrl = minioClient.upload(file.getInputStream(), originalFilename);
    
    // 3. è¿”å› URL
    return ResponseEntity.ok(new HashMap<String, Object>() {{
        put("data", new HashMap<String, String>() {{
            put("url", minioUrl);
        }});
    }});
}
```

**ä¼˜ç‚¹**:

- æ”¯æŒä»»æ„å›¾åºŠ
- å¯è‡ªå®šä¹‰å¤„ç†é€»è¾‘
- MIK æ’ä»¶æ— éœ€ä¿®æ”¹

### åœºæ™¯å››ï¼šå›¾ç‰‡é¢„å¤„ç†æœåŠ¡

**éœ€æ±‚**: ä¸Šä¼ å‰è‡ªåŠ¨å‹ç¼©å›¾ç‰‡ã€æ·»åŠ æ°´å°ã€‚

**æ–¹æ¡ˆ**:

1. åœ¨ Upload API ä¸­é›†æˆå›¾ç‰‡å¤„ç†åº“
2. æ¥æ”¶æ–‡ä»¶åè¿›è¡Œå¤„ç†
3. ä¿å­˜å¤„ç†åçš„å›¾ç‰‡

**ç¤ºä¾‹ä»£ç **ï¼ˆJava + Thumbnailatorï¼‰:

```java
// å‹ç¼©å›¾ç‰‡
Thumbnails.of(file.getInputStream())
    .size(1920, 1080)
    .outputQuality(0.8)
    .toFile(new File(filePath));

// æ·»åŠ æ°´å°
Thumbnails.of(filePath)
    .watermark(Positions.BOTTOM_RIGHT, watermarkImage, 0.5f)
    .toFile(new File(filePath));
```

**ä¼˜ç‚¹**:

- è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡
- å‡å°‘å­˜å‚¨ç©ºé—´
- ç»Ÿä¸€å›¾ç‰‡é£æ ¼

## ğŸ”§ æ‰©å±•å¼€å‘

### æ·»åŠ å›¾ç‰‡å‹ç¼©

ä½¿ç”¨å›¾ç‰‡å¤„ç†åº“ï¼ˆå¦‚ Java çš„ Thumbnailatorã€Node.js çš„ Sharpï¼‰:

```java
// Java ç¤ºä¾‹
Thumbnails.of(file.getInputStream())
    .size(1920, 1080)
    .outputQuality(0.8)
    .toFile(targetFile);
```

### ä¸Šä¼ åˆ°å…¶ä»–å›¾åºŠ

é›†æˆç›®æ ‡å›¾åºŠçš„ SDKï¼š

```java
// ä¸Šä¼ åˆ°é˜¿é‡Œäº‘ OSS
OSSClient ossClient = new OSSClient(endpoint, accessKeyId, accessKeySecret);
PutObjectResult result = ossClient.putObject(bucketName, objectName, inputStream);
String url = "https://" + bucketName + "." + endpoint + "/" + objectName;
```

### æ·»åŠ è®¿é—®æ§åˆ¶

```java
@RequestMapping("upload")
public ResponseEntity<?> upload(@RequestHeader("Authorization") String token,
                                @RequestParam("filename") MultipartFile file) {
    // éªŒè¯ token
    if (!isValidToken(token)) {
        return ResponseEntity.status(401).body("Unauthorized");
    }
    
    // å¤„ç†ä¸Šä¼ ...
}
```

### æ·»åŠ æ–‡ä»¶å¤§å°é™åˆ¶

```java
// application.properties
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
```

### æ·»åŠ æ–‡ä»¶ç±»å‹æ£€æŸ¥

```java
String contentType = file.getContentType();
if (!contentType.startsWith("image/")) {
    throw new IllegalArgumentException("åªå…è®¸ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶");
}
```

### æ·»åŠ ç—…æ¯’æ‰«æ

é›†æˆ ClamAV ç­‰ç—…æ¯’æ‰«æå·¥å…·ï¼š

```java
// æ‰«æç—…æ¯’
if (virusScanner.scan(file.getInputStream())) {
    throw new SecurityException("æ–‡ä»¶åŒ…å«ç—…æ¯’");
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§è¯­è¨€çš„å®ç°ï¼å¦‚æœæ‚¨æƒ³è´¡çŒ®æ–°çš„è¯­è¨€å®ç°ï¼Œè¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

### åŸºæœ¬è¦æ±‚

1. **éµå¾ª API è§„èŒƒ**ï¼šç¡®ä¿æ¥å£æ ¼å¼ä¸ç°æœ‰å®ç°ä¸€è‡´
2. **ç®€æ´å®ç°**ï¼šä½¿ç”¨è¯­è¨€çš„æ ‡å‡†æ¡†æ¶ï¼Œä»£ç ç®€æ´æ˜“æ‡‚
3. **å®Œæ•´æ–‡æ¡£**ï¼šæä¾›ç‹¬ç«‹çš„ README å’Œè¿è¡Œè¯´æ˜
4. **æµ‹è¯•éªŒè¯**ï¼šç¡®ä¿ä¸Šä¼ å’Œé¢„è§ˆåŠŸèƒ½æ­£å¸¸å·¥ä½œ

### ç›®å½•ç»“æ„

```
upload-api/
â”œâ”€â”€ {language}/
â”‚   â”œâ”€â”€ README.md          # è¯¥è¯­è¨€çš„è¯¦ç»†è¯´æ˜
â”‚   â”œâ”€â”€ src/               # æºä»£ç 
â”‚   â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ tests/             # æµ‹è¯•ç”¨ä¾‹ï¼ˆå¯é€‰ï¼‰
```

### æäº¤æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„è¯­è¨€å®ç°ç›®å½•
3. ç¼–å†™ä»£ç å’Œæ–‡æ¡£
4. æµ‹è¯•åŠŸèƒ½å®Œæ•´æ€§
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](../LICENSE) å¼€æºã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Markdown Image Kit æ’ä»¶](https://github.com/dong4j/markdown-image-kit)
- [MIK Help API](../help-api/)
- [é—®é¢˜åé¦ˆ](https://github.com/dong4j/mik-help/issues)

## ğŸ‘¤ ä½œè€…

**dong4j**

- Email: dong4j@gmail.com
- GitHub: [@dong4j](https://github.com/dong4j)

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼

