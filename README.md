# MIK-Help

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Java](https://img.shields.io/badge/Java-1.7%2B-orange.svg)](https://www.java.com/)
[![Node.js](https://img.shields.io/badge/Node.js-%3E%3D8.0.0-brightgreen.svg)](https://nodejs.org/)

[Markdown Image Kit](https://github.com/dong4j/markdown-image-kit) æ’ä»¶çš„é…å¥—æœåŠ¡é›†åˆï¼ŒåŒ…å«ä¸¤ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼š

1. **Upload API** - å¤šè¯­è¨€å®ç°çš„è‡ªå®šä¹‰å›¾åºŠä¸Šä¼ æ¥å£ç¤ºä¾‹
2. **Help API** - åŠ¨æ€å¸®åŠ©æ–‡æ¡£ URL æœåŠ¡

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æœåŠ¡è¯´æ˜](#æœåŠ¡è¯´æ˜)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

## ğŸ“– é¡¹ç›®æ¦‚è¿°

MIK-Help é¡¹ç›®æ—¨åœ¨ä¸º Markdown Image Kit æ’ä»¶æä¾›å¯æ‰©å±•çš„åç«¯æœåŠ¡æ”¯æŒã€‚é€šè¿‡å°†å¤æ‚çš„æœåŠ¡ç«¯é€»è¾‘ä»æ’ä»¶ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œé™ä½äº†æ’ä»¶çš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¸ºç”¨æˆ·æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªé¡¹ç›®ï¼Ÿ

**é—®é¢˜ä¸€ï¼šå›¾åºŠé›†æˆå¤æ‚åº¦é«˜**

Markdown Image Kit æ’ä»¶å·²ç»å†…ç½®äº†å¤šç§ä¸»æµå›¾åºŠï¼ˆé˜¿é‡Œäº‘ OSSã€ä¸ƒç‰›äº‘ã€è…¾è®¯äº‘ COS ç­‰ï¼‰ï¼Œä½†ï¼š

- æ¯ä¸ªå›¾åºŠéƒ½éœ€è¦é›†æˆ SDK å’Œå¤„ç†é€»è¾‘
- æ’ä»¶ä½“ç§¯è¶Šæ¥è¶Šå¤§
- ç”¨æˆ·çš„ç‰¹æ®Šéœ€æ±‚ï¼ˆå¦‚è‡ªå»ºå›¾åºŠã€å†…ç½‘éƒ¨ç½²ï¼‰éš¾ä»¥æ»¡è¶³

**è§£å†³æ–¹æ¡ˆï¼šUpload API**

æä¾›ç»Ÿä¸€çš„ä¸Šä¼ æ¥å£æ ‡å‡†ï¼Œç”¨æˆ·å¯ä»¥ï¼š

- ä½¿ç”¨ç¤ºä¾‹ä»£ç å¿«é€Ÿæ­å»ºè‡ªå·±çš„å›¾åºŠ
- è‡ªå®šä¹‰å›¾ç‰‡å¤„ç†é€»è¾‘ï¼ˆå‹ç¼©ã€æ°´å°ç­‰ï¼‰
- å°† API ä½œä¸ºä¸­è½¬å±‚ï¼Œè½¬å‘åˆ°ä»»æ„ç›®æ ‡å›¾åºŠ

**é—®é¢˜äºŒï¼šå¸®åŠ©æ–‡æ¡£æ›´æ–°éœ€è¦å‘ç‰ˆ**

æ’ä»¶ä¸­çš„å¸®åŠ©æ–‡æ¡£é“¾æ¥æ˜¯ç¡¬ç¼–ç çš„ï¼Œæ¯æ¬¡æ›´æ–°éƒ½éœ€è¦ï¼š

- ä¿®æ”¹ä»£ç 
- å‘å¸ƒæ–°ç‰ˆæœ¬
- ç”¨æˆ·æ‰‹åŠ¨æ›´æ–°æ’ä»¶

**è§£å†³æ–¹æ¡ˆï¼šHelp API**

é€šè¿‡æœåŠ¡ç«¯åŠ¨æ€è¿”å›å¸®åŠ©æ–‡æ¡£ URLï¼š

- ä¿®æ”¹é…ç½®å³å¯æ›´æ–°é“¾æ¥ï¼Œæ— éœ€é‡å¯æœåŠ¡
- æ’ä»¶æ— éœ€æ›´æ–°å³å¯è·å–æœ€æ–°æ–‡æ¡£
- å¯é’ˆå¯¹ä¸åŒç‰ˆæœ¬è¿”å›ä¸åŒæ–‡æ¡£

## ğŸ“ é¡¹ç›®ç»“æ„

```
mik-help/
â”œâ”€â”€ upload-api/                    # è‡ªå®šä¹‰å›¾åºŠä¸Šä¼ æ¥å£
â”‚   â”œâ”€â”€ README.md                  # Upload API æ€»è§ˆæ–‡æ¡£
â”‚   â”œâ”€â”€ java/                      # Java å®ç°ï¼ˆSpring Bootï¼‰
â”‚   â”‚   â”œâ”€â”€ README.md             # Java å®ç°æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ pom.xml               # Maven é…ç½®
â”‚   â”‚   â””â”€â”€ src/                  # æºä»£ç 
â”‚   â”‚       â”œâ”€â”€ main/
â”‚   â”‚       â”‚   â”œâ”€â”€ java/
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ info/dong4j/idea/plugin/help/
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ UploadApplication.java      # ä¸»åº”ç”¨
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ controller/
â”‚   â”‚       â”‚   â”‚       â”‚   â””â”€â”€ FileController.java     # ä¸Šä¼ æ§åˆ¶å™¨
â”‚   â”‚       â”‚   â”‚       â””â”€â”€ config/
â”‚   â”‚       â”‚   â”‚           â””â”€â”€ WebMvcConfig.java       # Web é…ç½®
â”‚   â”‚       â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”‚       â””â”€â”€ application.properties          # åº”ç”¨é…ç½®
â”‚   â”‚       â””â”€â”€ bin/
â”‚   â”‚           â””â”€â”€ server.sh                          # å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ [å…¶ä»–è¯­è¨€å®ç°...]         # Node.jsã€Pythonã€Go ç­‰ï¼ˆè®¡åˆ’ä¸­ï¼‰
â”‚
â”œâ”€â”€ help-api/                      # åŠ¨æ€å¸®åŠ©æ–‡æ¡£æœåŠ¡
â”‚   â”œâ”€â”€ README.md                  # Help API æ–‡æ¡£
â”‚   â”œâ”€â”€ index.js                   # Node.js å®ç°ï¼ˆå•æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ config.json                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json               # NPM é…ç½®
â”‚   â”œâ”€â”€ start.sh                   # å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ stop.sh                    # åœæ­¢è„šæœ¬
â”‚
â””â”€â”€ README.md                      # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Upload API - å¿«é€Ÿä½“éªŒ

#### Java å®ç°

```bash
# 1. è¿›å…¥ Java å®ç°ç›®å½•
cd upload-api/java

# 2. é…ç½®ä¸Šä¼ è·¯å¾„
vim src/main/resources/application.properties
# ä¿®æ”¹: web.upload-path=/your/upload/path/

# 3. è¿è¡ŒæœåŠ¡
mvn clean spring-boot:run

# 4. æµ‹è¯•ä¸Šä¼ 
curl -X POST http://localhost:12345/upload \
  -F "fileName=@/path/to/image.png"

# 5. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿”å›çš„ URL é¢„è§ˆå›¾ç‰‡
```

#### é…ç½® MIK æ’ä»¶

1. æ‰“å¼€ IDEï¼š`Settings/Preferences` â†’ `Tools` â†’ `Markdown Image Kit`
2. é€‰æ‹© `è‡ªå®šä¹‰` å›¾åºŠ
3. é…ç½®ï¼š
    - URL: `http://localhost:12345/upload`
    - å‚æ•°å: `fileName`
    - JSON Path: `data.url`

### Help API - å¿«é€Ÿä½“éªŒ

```bash
# 1. è¿›å…¥ Help API ç›®å½•
cd help-api

# 2. é…ç½®å¸®åŠ©é“¾æ¥ï¼ˆå¯é€‰ï¼Œé»˜è®¤å·²é…ç½®ï¼‰
vim config.json

# 3. å¯åŠ¨æœåŠ¡
node index.js

# 4. æµ‹è¯•æ¥å£
curl http://localhost:12346/setting/aliyun_cloud
```

## ğŸ“– æœåŠ¡è¯´æ˜

### Upload API - è‡ªå®šä¹‰å›¾åºŠä¸Šä¼ æ¥å£

#### åŠŸèƒ½ç‰¹æ€§

- âœ… å¤šè¯­è¨€å®ç°ç¤ºä¾‹ï¼ˆJavaã€Node.jsã€Pythonã€Go ç­‰ï¼‰
- âœ… ç»Ÿä¸€çš„ RESTful API è§„èŒƒ
- âœ… æ–‡ä»¶æŒ‰ç±»å‹è‡ªåŠ¨åˆ†ç±»å­˜å‚¨
- âœ… ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åé¿å…å†²çª
- âœ… æ”¯æŒé™æ€èµ„æºé¢„è§ˆ
- âœ… ç®€æ´çš„ä»£ç å®ç°ï¼Œæ˜“äºæ‰©å±•

#### API è§„èŒƒ

**ä¸Šä¼ æ¥å£**: `POST /upload`

**è¯·æ±‚**:
```bash
curl -X POST http://localhost:12345/upload \
  -F "fileName=@/path/to/image.png"
```

**å“åº”**:
```json
{
  "data": {
    "url": "http://localhost:12345/archive/png/1634567890123image.png"
  }
}
```

**é¢„è§ˆæ¥å£**: `GET /archive/{type}/{filename}`

#### ä¸¤ç§ä½¿ç”¨æ–¹å¼

**æ–¹å¼ä¸€ï¼šæœ¬åœ°å›¾åºŠ**

```
[MIK æ’ä»¶] â†’ [Upload API] â†’ [æœ¬åœ°å­˜å‚¨] â†’ [é¢„è§ˆè®¿é—®]
```

ç›´æ¥è¿è¡Œç¤ºä¾‹ä»£ç ï¼Œæ­å»ºç®€å•çš„æœ¬åœ°å›¾åºŠæœåŠ¡ã€‚é€‚ç”¨äºä¸ªäººç¬”è®°ã€åšå®¢å†™ä½œã€å†…ç½‘æ–‡æ¡£ç³»ç»Ÿã€‚

**æ–¹å¼äºŒï¼šä¸­è½¬æœåŠ¡**

```
[MIK æ’ä»¶] â†’ [Upload API] â†’ [è‡ªå®šä¹‰é€»è¾‘] â†’ [ç›®æ ‡å›¾åºŠ]
                                â†“
                        â€¢ å›¾ç‰‡å‹ç¼©
                        â€¢ æ·»åŠ æ°´å°
                        â€¢ æ ¼å¼è½¬æ¢
                        â€¢ æƒé™æ§åˆ¶
```

å°† Upload API ä½œä¸ºä¸­è½¬å±‚ï¼Œåœ¨æ¥æ”¶åˆ°æ–‡ä»¶åï¼Œå†ä¸Šä¼ åˆ°å…¶ä»–å›¾åºŠã€‚é€‚ç”¨äºéœ€è¦å›¾ç‰‡é¢„å¤„ç†ã€ç»Ÿä¸€å¤šä¸ªå›¾åºŠæ¥å£ã€ä¼ä¸šçº§åº”ç”¨ã€‚

#### è®¾è®¡ä¼˜åŠ¿

**å‡è½» MIK æ’ä»¶çš„å¤æ‚åº¦**ï¼šæ’ä»¶ä¸éœ€è¦é›†æˆæ‰€æœ‰å›¾åºŠçš„ SDK å’Œé€»è¾‘ï¼Œåªéœ€è¦è°ƒç”¨ç»Ÿä¸€çš„ä¸Šä¼ æ¥å£ã€‚ç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©åç«¯å®ç°ï¼Œæ’ä»¶ä¿æŒç®€æ´å’Œç¨³å®šã€‚

#### è¯¦ç»†æ–‡æ¡£

- [Upload API æ€»è§ˆ](upload-api/README.md)
- [Java å®ç°æ–‡æ¡£](upload-api/java/README.md)

---

### Help API - åŠ¨æ€å¸®åŠ©æ–‡æ¡£æœåŠ¡

#### åŠŸèƒ½ç‰¹æ€§

- âœ… åŸºäº Node.js åŸç”Ÿæ¨¡å—ï¼Œé›¶ä¾èµ–
- âœ… é…ç½®æ–‡ä»¶çƒ­åŠ è½½ï¼Œæ¯æ¬¡è¯·æ±‚è‡ªåŠ¨åˆ·æ–°
- âœ… æ”¯æŒå¤šç§äº‘å­˜å‚¨å¹³å°çš„å¸®åŠ©æ–‡æ¡£é“¾æ¥
- âœ… RESTful API è®¾è®¡
- âœ… CORS æ”¯æŒ
- âœ… è½»é‡çº§å•æ–‡ä»¶å®ç°

#### API è§„èŒƒ

**å¸®åŠ©æ–‡æ¡£æ¥å£**: `GET /{where}/{type}`

**è¯·æ±‚**:
```bash
curl http://localhost:12346/setting/aliyun_cloud
```

**å“åº”**:
```json
{
  "code": "200",
  "url": "https://help.aliyun.com/zh/oss/"
}
```

**å¥åº·æ£€æŸ¥**: `GET /health`

#### å·¥ä½œæµç¨‹

```
[ç”¨æˆ·ç‚¹å‡» Help æŒ‰é’®]
        â†“
[MIK æ’ä»¶] ç»„è£… URL: /setting/{type}
        â†“
[ç½‘ç»œè¯·æ±‚] â†’ [Help API]
        â†“
1. é‡æ–°åŠ è½½ config.json
2. æ ¹æ® type æŸ¥æ‰¾å¯¹åº”çš„ URL
3. è¿”å› JSON: {code: "200", url: "..."}
        â†“
[æµè§ˆå™¨] æ‰“å¼€å¸®åŠ©æ–‡æ¡£
```

#### é…ç½®çƒ­æ›´æ–°

æ¯æ¬¡è¯·æ±‚éƒ½ä¼šé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå®ç°äº†é…ç½®çš„çƒ­æ›´æ–°ï¼š

```javascript
function reloadConfig() {
    const data = fs.readFileSync(CONFIG_PATH, 'utf8');
    config = JSON.parse(data);
}

// æ¯æ¬¡è¯·æ±‚éƒ½è°ƒç”¨
reloadConfig();
```

**ä¼˜åŠ¿**ï¼š

- âœ… ä¿®æ”¹é…ç½®åç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯æœåŠ¡
- âœ… æ–‡æ¡£é“¾æ¥æ›´æ–°åï¼Œç”¨æˆ·ç«‹å³å¯è§
- âœ… é›¶åœæœºæ—¶é—´
- âœ… é€‚åˆé¢‘ç¹è°ƒæ•´æ–‡æ¡£é“¾æ¥çš„åœºæ™¯

#### è¯¦ç»†æ–‡æ¡£

- [Help API æ–‡æ¡£](help-api/README.md)

## ğŸ“ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ä¸€ï¼šä¸ªäººæœ¬åœ°å›¾åºŠ

**éœ€æ±‚**: ä¸æƒ³å°†å›¾ç‰‡ä¸Šä¼ åˆ°äº‘ç«¯ï¼Œå¸Œæœ›ä¿å­˜åœ¨æœ¬åœ°ã€‚

**æ–¹æ¡ˆ**:

1. è¿è¡Œ Upload API åœ¨æœ¬æœº
2. è®¾ç½®ä¸Šä¼ è·¯å¾„åˆ°æœ¬åœ°ç£ç›˜
3. MIK æ’ä»¶é…ç½®ä¸º `http://localhost:12345/upload`

**ä¼˜ç‚¹**: å®Œå…¨ç¦»çº¿ã€æ— éšç§é¡¾è™‘ã€é›¶æˆæœ¬

### åœºæ™¯äºŒï¼šå†…ç½‘å›¢é˜Ÿå›¾åºŠ

**éœ€æ±‚**: å›¢é˜Ÿå†…éƒ¨æ–‡æ¡£ç³»ç»Ÿï¼Œå›¾ç‰‡å­˜å‚¨åœ¨å†…ç½‘æœåŠ¡å™¨ã€‚

**æ–¹æ¡ˆ**:

1. åœ¨å†…ç½‘æœåŠ¡å™¨éƒ¨ç½² Upload API
2. é…ç½® NAS æˆ–å…±äº«å­˜å‚¨
3. å›¢é˜Ÿæˆå‘˜é…ç½®å†…ç½‘åœ°å€

**ä¼˜ç‚¹**: å›¢é˜Ÿå…±äº«ã€ç»Ÿä¸€ç®¡ç†ã€å†…ç½‘å®‰å…¨

### åœºæ™¯ä¸‰ï¼šè‡ªå»ºå›¾åºŠä¸­è½¬

**éœ€æ±‚**: ä½¿ç”¨éä¸»æµå›¾åºŠï¼ˆå¦‚ MinIOã€WebDAVï¼‰ï¼Œä½† MIK æ’ä»¶æœªå†…ç½®æ”¯æŒã€‚

**æ–¹æ¡ˆ**:

1. åŸºäº Upload API ç¤ºä¾‹æ‰©å±•
2. æ¥æ”¶æ–‡ä»¶åè°ƒç”¨ç›®æ ‡å›¾åºŠ SDK
3. è¿”å›ç›®æ ‡å›¾åºŠ URL

**ç¤ºä¾‹ä»£ç **:

```java
@RequestMapping("upload")
public ResponseEntity<?> upload(@RequestParam("fileName") MultipartFile file) {
    // ä¸Šä¼ åˆ° MinIO
    String url = minioClient.upload(file.getInputStream(), filename);
    
    // è¿”å› URL
    return ResponseEntity.ok(Collections.singletonMap("data", 
        Collections.singletonMap("url", url)));
}
```

**ä¼˜ç‚¹**: æ”¯æŒä»»æ„å›¾åºŠã€å¯è‡ªå®šä¹‰å¤„ç†ã€æ’ä»¶æ— éœ€ä¿®æ”¹

### åœºæ™¯å››ï¼šå›¾ç‰‡è‡ªåŠ¨å¤„ç†

**éœ€æ±‚**: ä¸Šä¼ å‰è‡ªåŠ¨å‹ç¼©å›¾ç‰‡ã€æ·»åŠ æ°´å°ã€‚

**æ–¹æ¡ˆ**:

1. åœ¨ Upload API ä¸­é›†æˆå›¾ç‰‡å¤„ç†åº“
2. æ¥æ”¶æ–‡ä»¶åè¿›è¡Œå¤„ç†
3. ä¿å­˜å¤„ç†åçš„å›¾ç‰‡

**ä¼˜ç‚¹**: è‡ªåŠ¨ä¼˜åŒ–ã€å‡å°‘å­˜å‚¨ã€ç»Ÿä¸€é£æ ¼

### åœºæ™¯äº”ï¼šå¤šç¯å¢ƒå¸®åŠ©æ–‡æ¡£

**éœ€æ±‚**: å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒçš„å¸®åŠ©æ–‡æ¡£ã€‚

**æ–¹æ¡ˆ**:

1. éƒ¨ç½² Help API
2. ä¸åŒç¯å¢ƒé…ç½®ä¸åŒçš„ `config.json`
3. ä¿®æ”¹é…ç½®åç«‹å³ç”Ÿæ•ˆ

**ä¼˜ç‚¹**: çµæ´»é…ç½®ã€é›¶åœæœºæ›´æ–°ã€ç‰ˆæœ¬éš”ç¦»

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Upload API éƒ¨ç½²

#### Java å®ç°

**æ‰“åŒ…**:
```bash
cd upload-api/java
mvn clean package
```

**éƒ¨ç½²**:
```bash
# è§£å‹éƒ¨ç½²åŒ…
unzip target/mik-upload-api.zip
cd mik-upload-api

# ä¿®æ”¹é…ç½®
vim config/application.properties

# å¯åŠ¨æœåŠ¡
chmod +x bin/server.sh
./bin/server.sh
```

**Docker éƒ¨ç½²**:
```bash
docker run -d \
  --name mik-upload-api \
  -p 12345:12345 \
  -v /path/to/uploads:/uploads \
  -v /path/to/config:/app/config \
  mik-upload-api:latest
```

**è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ [Java å®ç°éƒ¨ç½²æ–‡æ¡£](upload-api/java/README.md#éƒ¨ç½²æŒ‡å—)

---

### Help API éƒ¨ç½²

#### ä½¿ç”¨ PM2ï¼ˆæ¨èï¼‰

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨æœåŠ¡
cd help-api
pm2 start index.js --name mik-help-api

# å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

#### ä½¿ç”¨ Systemd

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/mik-help-api.service`ï¼š

```ini
[Unit]
Description=MIK Help API Service
After=network.target

[Service]
Type=simple
User=your-user
WorkingDirectory=/path/to/help-api
Environment="PORT=12346"
ExecStart=/usr/bin/node /path/to/help-api/index.js
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl start mik-help-api
sudo systemctl enable mik-help-api
```

**è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ [Help API éƒ¨ç½²æ–‡æ¡£](help-api/README.md#éƒ¨ç½²æŒ‡å—)

---

### ç”Ÿäº§ç¯å¢ƒå»ºè®®

#### Nginx åå‘ä»£ç†

é…ç½® Nginx æä¾› HTTPS æ”¯æŒå’Œè´Ÿè½½å‡è¡¡ï¼š

```nginx
# HTTP é‡å®šå‘åˆ° HTTPS
server {
    listen 80;
    server_name mik.example.com;
    return 301 https://$host$request_uri;
}

# HTTPS æœåŠ¡
server {
    listen 443 ssl http2;
    server_name mik.example.com;
    
    ssl_certificate /etc/nginx/ssl/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/privkey.pem;
    
    # Upload API
    location /upload {
        proxy_pass http://localhost:12345;
        proxy_set_header Host $host;
        client_max_body_size 10M;
    }
    
    # Upload API é¢„è§ˆ
    location /archive {
        proxy_pass http://localhost:12345;
    }
    
    # Help API
    location /setting {
        proxy_pass http://localhost:12346;
        proxy_set_header Host $host;
    }
    
    location /health {
        proxy_pass http://localhost:12346;
    }
}
```

#### å®‰å…¨å»ºè®®

**Upload API**:

- âœ… é™åˆ¶ä¸Šä¼ æ–‡ä»¶å¤§å°
- âœ… éªŒè¯æ–‡ä»¶ç±»å‹
- âœ… æ·»åŠ è®¿é—®é¢‘ç‡é™åˆ¶
- âœ… ä½¿ç”¨ CDN åŠ é€Ÿè®¿é—®
- âœ… å®šæœŸå¤‡ä»½ä¸Šä¼ çš„æ–‡ä»¶

**Help API**:

- âœ… è®¾ç½®é…ç½®æ–‡ä»¶æƒé™ï¼ˆ600ï¼‰
- âœ… å¯ç”¨ HTTPS
- âœ… é…ç½®é˜²ç«å¢™è§„åˆ™
- âœ… ç›‘æ§æœåŠ¡çŠ¶æ€

**é€šç”¨å»ºè®®**:

- âœ… ä½¿ç”¨ SSL/TLS åŠ å¯†
- âœ… å¯ç”¨è®¿é—®æ—¥å¿—
- âœ… å®šæœŸæ›´æ–°ä¾èµ–
- âœ… é…ç½®ç›‘æ§å’Œå‘Šè­¦

## ğŸ”§ æ‰©å±•å¼€å‘

### Upload API æ‰©å±•

#### æ·»åŠ å›¾ç‰‡å‹ç¼©

Java ç¤ºä¾‹ï¼ˆä½¿ç”¨ Thumbnailatorï¼‰:

```java
Thumbnails.of(file.getInputStream())
    .size(1920, 1080)
    .outputQuality(0.8)
    .toFile(targetFile);
```

#### ä¸Šä¼ åˆ°äº‘å­˜å‚¨

Java ç¤ºä¾‹ï¼ˆé˜¿é‡Œäº‘ OSSï¼‰:

```java
OSSClient ossClient = new OSSClient(endpoint, accessKeyId, accessKeySecret);
PutObjectResult result = ossClient.putObject(bucketName, objectName, inputStream);
String url = "https://" + bucketName + "." + endpoint + "/" + objectName;
```

#### æ·»åŠ è®¿é—®æ§åˆ¶

```java
@RequestMapping("upload")
public ResponseEntity<?> upload(@RequestHeader("Authorization") String token,
                                @RequestParam("fileName") MultipartFile file) {
    if (!isValidToken(token)) {
        return ResponseEntity.status(401).body("Unauthorized");
    }
    // å¤„ç†ä¸Šä¼ ...
}
```

### Help API æ‰©å±•

#### æ·»åŠ æ–°çš„å¸®åŠ©æ–‡æ¡£ç±»å‹

ç¼–è¾‘ `config.json`ï¼š

```json
{
  "help": {
    "new_platform": "https://new-platform.com/docs"
  }
}
```

æ— éœ€é‡å¯æœåŠ¡ï¼Œé…ç½®ç«‹å³ç”Ÿæ•ˆï¼

#### æ·»åŠ è®¿é—®ç»Ÿè®¡

```javascript
const stats = {};

function recordAccess(type) {
    stats[type] = (stats[type] || 0) + 1;
}

// æ·»åŠ ç»Ÿè®¡æ¥å£
if (pathname === '/stats') {
    res.end(JSON.stringify(stats));
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ® Upload API çš„æ–°è¯­è¨€å®ç°

å¦‚æœæ‚¨æƒ³è´¡çŒ®æ–°çš„è¯­è¨€å®ç°ï¼Œè¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1. **éµå¾ª API è§„èŒƒ**ï¼šç¡®ä¿æ¥å£æ ¼å¼ä¸ç°æœ‰å®ç°ä¸€è‡´
2. **ç®€æ´å®ç°**ï¼šä½¿ç”¨è¯­è¨€çš„æ ‡å‡†æ¡†æ¶ï¼Œä»£ç ç®€æ´æ˜“æ‡‚
3. **å®Œæ•´æ–‡æ¡£**ï¼šæä¾›ç‹¬ç«‹çš„ README å’Œè¿è¡Œè¯´æ˜
4. **æµ‹è¯•éªŒè¯**ï¼šç¡®ä¿ä¸Šä¼ å’Œé¢„è§ˆåŠŸèƒ½æ­£å¸¸å·¥ä½œ

**ç›®å½•ç»“æ„**:

```
upload-api/
â”œâ”€â”€ {language}/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ config/
```

### æäº¤æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### æ¬¢è¿çš„è´¡çŒ®ç±»å‹

- ğŸŒ Upload API çš„æ–°è¯­è¨€å®ç°ï¼ˆNode.jsã€Pythonã€Goã€PHP ç­‰ï¼‰
- ğŸ“ æ–‡æ¡£æ”¹è¿›å’Œç¿»è¯‘
- ğŸ› Bug ä¿®å¤
- âœ¨ æ–°åŠŸèƒ½å»ºè®®
- ğŸ¨ ä»£ç ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Markdown Image Kit æ’ä»¶](https://github.com/dong4j/markdown-image-kit)
- [Upload API æ–‡æ¡£](upload-api/README.md)
- [Help API æ–‡æ¡£](help-api/README.md)
- [é—®é¢˜åé¦ˆ](https://github.com/dong4j/mik-help/issues)

## ğŸ‘¤ ä½œè€…

**dong4j**

- Email: dong4j@gmail.com
- GitHub: [@dong4j](https://github.com/dong4j)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼
